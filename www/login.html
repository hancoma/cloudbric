<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' gallerybear.com * gap: ws: https://ssl.gstatic.com;img-src * data: content:;style-src 'self' 'unsafe-inline' data: blob:;script-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">


   
    <script type="text/javascript" src="js/jquery.min.js"></script>
      <link href="css/ratchet.min.css" rel="stylesheet">
       <link href="css/ratchet-theme-ios.css" rel="stylesheet">
 <link rel="stylesheet" type="text/css" href="css/uikit.gradient.min.css">


          <script src="js/uikit.js"></script>
          <script src="js/ratchet.js"></script>
             <link rel="stylesheet" type="text/css" href="css/app.css" />
             <link rel="stylesheet" type="text/css" href="css/login.css" />
                   <link href="css/style.css" rel="stylesheet">
                    <script type="text/javascript" src="cordova.js"></script>
                    
                    <!-- include summernote css/js-->

    <title>Hello World</title>
</head>

<body>

 <div class="uk-grid" style="overflow-y: scroll;" >
    
          <div id="login_contents" style="width:100%; height:100%;  padding-top:100px;" class="uk-width-1-1 uk-container-center uk-text-center">
                      
                                
                                                      <div class="uk-container-center" >
                                                          <img src="assets-mobile/img/main-auth.png" alt="Cloudbric auth logo">
                                                      </div>
                                                      <div class="login-screen-title uk-text-primary uk-text-bold uk-text-large" style="margin-top:25px;">Welcome to Cloudbric!</div>
<div class='uk-width-7-10 uk-container-center' style="margin-top:5%;">
        <form class="input-group" style="border:0px;">
              <input type="email" placeholder="Email"  id="email">
              <input type="password" placeholder="Password"  id="password">

            <label class="uk-text-left uk-width-1-1 uk-text-muted" style="float:left; margin:5px;" ><input type="checkbox">  Keep me signed in</label>
            <button class="uk-button uk-button-primary uk-width-1-1 " type="button" onclick="login_submit()">LOGIN</button>
        
        </form>
        <ul class="uk-list uk-text-muted list">
            <li><a href="#join_modal">Create Account</a></li>
            <li><a href="#password_modal">Forgot your password?</a></li>
         <li class="sign-divider">or</li>
         <li class="sign-sns-item">
            <img src="img/facebook.png" onclick="login_fb();">
        </li>
        <li class="sign-sns-item"><div class="g-signin2" data-onsuccess="onSignIn"></div>
            <img src="img/google.png" onclick="">
        </li>
        </ul>
   




</div>

          </div>
    
</div>

<div id="password_modal" class="modal">
  <header class="bar bar-nav">
    <a class="icon icon-left-nav pull-left" href="#password_modal"></a>
    <h1 class="title">Reset your Account</h1>
  </header>

  <div class="uk-grid" style="overflow-y: scroll;" >
    
          <div id="login_contents" style="width:100%; height:100%;  padding-top:100px;" class="uk-width-1-1 uk-container-center uk-text-center">
                      
                                
                                                      <div class="uk-container-center" >
                                                          <img src="assets-mobile/img/main-auth.png" alt="Cloudbric auth logo">
                                                      </div>
                                                      <div class="login-screen-title uk-text-primary uk-text-bold uk-text-large" >Reset your password</div>
<div class='uk-width-8-10 uk-container-center' style="margin-top:5%;">
<p class="">Don't worry, it happens!

Please enter your email address to

request a password reset.
</p>
</div>
<div class='uk-width-8-10 uk-container-center' style="margin-top:5%;">
        <form class="input-group" style="border:0px;">
          <ul class="table-view2">
            <li class="table-view-cell">   <input type="email" placeholder="E-mail Address"  id="re_email" style="border:0px;"><span class="badge badge-negative badge-hide"  id="re_email_badge">!</span></li>
            
          </ul>

            
            <span class="uk-button uk-button-primary uk-width-1-1 "  onclick="reset_password()">Reset password</span>
        
        </form>
       
   




</div>

          </div>
    
</div>
</div>

<div id="join_modal" class="modal">
 

  <div class="uk-grid" style="overflow-y: scroll;" >
    
          <div id="login_contents" style="width:100%; height:100%;  padding:30px; margin-top:10px; justify-content: center" class="uk-width-1-1 uk-container-center uk-text-center">
                      
                                
                                                      <div class="uk-container-center" >
                                                          <img src="assets-mobile/img/main-auth.png" alt="Cloudbric auth logo">
                                                      </div>
                                                      <div class="login-screen-title uk-text-primary uk-text-bold uk-text-large" >Create New Account</div>
<div class='uk-width-8-10 uk-container-center' style="margin-top:5%;">
        <form class="input-group" style="border:0px;">
          <ul class="table-view">
  <li class="table-view-cell">
              <input type="text" placeholder="name"  id="join_name"  ><span class="badge badge-negative badge-hide" id="name_badge">!</span></li>
            <li class="table-view-cell">   <input type="email" placeholder="E-mail Address"  id="join_email"><span class="badge badge-negative badge-hide"  id="email_badge">!</span></li>
            <li class="table-view-cell">   <input type="password" placeholder="Password"  id="join_password"><span class="badge badge-negative badge-hide"  id="password_badge">!</span></li>
            <li class="table-view-cell">   <input type="password" placeholder="Re-enter Password"  id="join_re_password"><span class="badge badge-negative badge-hide"  id="password2_badge">!</span></li>
          </ul>

            <label class="uk-text-left uk-width-1-1 uk-text-muted" style="float:left; margin:5px;" ><p class="">By clicking Sign Up, you agree to our <a href="https://www.cloudbric.com/privacy-policy/" class="link external">Privacy Policy</a>, <a href="https://www.cloudbric.com/acceptable-use-policy/" class="link external">Acceptable Use Policy</a> and <a href="https://www.cloudbric.com/service-level-agreement-cloudbric/" class="link external">Service Level Agreement</a>.</p></label>
            <button class="uk-button uk-button-primary uk-width-1-1 " type="button" onclick="join_submit()">SIGN UP</button>
        
        </form>
        <label class="uk-text-left uk-width-1-1 uk-text-muted" style="float:left; margin-top:15px;" ><a href="#join_modal">back</a></label>
       
   




</div>

          </div>
    
</div>
</div>


<style>
.sign-divider {
    font-size: 14px;
    color: #666;
    text-align: center;
}
.sign-sns-item{
    margin-bottom: 10px;
}
.badge-hide {
  display:none;
}
.input_error {
  color:#ff0000;
}
</style>
<script>
  var error_code="00";
  var new_password;
var randomNum = {};
//0~9까지의 난수
randomNum.random = function(n1, n2) {
    return parseInt(Math.random() * (n2 -n1 +1)) + n1;
};

randomNum.authNo= function(n) {
    var value = "";
    for(var i=0; i<n; i++){
        value += randomNum.random(0,9);
    }
    return value;
};

 randomNum.printRandom =function(num) {
    new_password = randomNum.authNo(num);
    };

  $("#join_name").focusout(function(){
   // name_check();
  });
  $("#join_name").focus(function(){
      $("#name_badge").addClass("badge-hide");
      $("#join_name").removeClass("input_error");
      return;

  });
  $("#join_name").focus(function(){
      $("#password_badge").addClass("badge-hide");
      $("#join_password").removeClass("input_error");

  });
  $("#join_email").focus(function(){
      $("#email_badge").addClass("badge-hide");
      $("#join_email").removeClass("input_error");

  });
  $("#join_email").focusout(function(){
   // email_check();
   // email_member_check();
  })
  $("#join_password").focusout(function(){
   // password_check();
  })
   $("#join_re_password").focusout(function(){
   // password_re_check();
  })

   $("#email").focusout(function(){
   // login_email_check();
    
  })

     $("#password").focusout(function(){
    // login_password_check();
    
  })

  
  function email_check() {
    var email=$("#join_email").val().replace(/ /g, '');
    regEmail = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
  
  
if(!regEmail.test(email)) {
    alert_msg('error','Email address is invalid.');
  
     $("#email_badge").removeClass("badge-hide");
      $("#join_email").addClass("input_error");
        exit;
}



  }
  function email_member_check() {
    var email=$("#join_email").val().replace(/ /g, '');
      $.ajax({
    url: "https://api-dev.cloudbric.com/v2/authority",
    beforeSend: function(xhr) { 
      xhr.setRequestHeader("X-Cloudbric-Key", "zzg0cockog4g0sk4kgcc44ow0go40sw88wkkg8ks"); 
    },
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    processData: false,
    data: '{"email": "'+email+'"}',
    success: function (data) {
      var data = JSON.stringify(data);
      var data = JSON.parse(data);
      var user_idx=data.result;
      alert_msg("error","This is a registered mail.");
      $("#email_badge").removeClass("badge-hide");
      $("#join_email").addClass("input_error");
      return; 
    },
    error: function(){
      
    }
});
   }


  
  function password_check() {
    var password=$("#join_password").val().replace(/ /g, '');
    var password_length=password.length;
    if (password_length<8 != password_length>20 ) {
      alert_msg('error','Please enter a password between 8 and 20 characters.');
      $("#password_badge").removeClass("badge-hide");
      $("#join_password").addClass("input_error");
      exit;
    }
  }
   function password_re_check() {
    var password=$("#join_password").val().replace(/ /g, '');
    var re_password=$("#join_re_password").val().replace(/ /g, '');
    var password_length=password.length;
    if (password_length<8 != password_length>20 ) {
      alert_msg('error','Please enter a password between 8 and 20 characters.');
      $("#password_badge").removeClass("badge-hide");
      $("#join_password").addClass("input_error");
      return;
    }
    if (password != re_password){
       alert_msg('error','Password confirmation is different.');
       $("#password2_badge").removeClass("badge-hide");
      $("#join_re_password").addClass("input_error");
      exit;
    }
  }
  function name_check() {
    var name=$("#join_name").val().replace(/ /g, '');
    var name_length=name.length;
    if (name_length<2 != name_length>40) {
      alert_msg("error","Please enter at least 2 ~ 40 characters.");
      $("#name_badge").removeClass("badge-hide");
      $("#join_name").addClass("input_error");
      exit;
    }

  }

    function login_email_check() {
    var email=$("#email").val().replace(/ /g, '');
    regEmail = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
  
  
if(!regEmail.test(email)) {
    alert_msg('error','Email address is invalid.');

        return;
}

  }

    function login_password_check() {
    var password=$("#password").val().replace(/ /g, '');
    var password_length=password.length;
    if (password_length<8 != password_length>20 ) {
      alert_msg('error','Please enter a password between 8 and 20 characters.');
      
      return;
    }
  }



    function login_submit() {

    var email=$("#email").val().replace(/ /g, '');
    var password=$("#password").val().replace(/ /g, '');

    if (email.length<1) {
      alert_msg('error','Email address is invalid.');
      return;
    }
    if (password.length<1) {
       alert_msg('error','Please enter a password between 8 and 20 characters.');
      return;
    }

    $.ajax({
    url: "https://api-dev.cloudbric.com/v2/authority/password_check",
    beforeSend: function(xhr) { 
      xhr.setRequestHeader("X-Cloudbric-Key", "zzg0cockog4g0sk4kgcc44ow0go40sw88wkkg8ks"); 
    },
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    processData: false,
    data: '{"email": "'+email+'", "password": "'+password+'"}',
    success: function (data) {
      var data = JSON.stringify(data);
      var data = JSON.parse(data);
      var user_idx=data.result;
      alert_msg("MSG","You are logged in. Thank you.");
       location.replace('main.html') ;
    },
    error: function(){
      alert_msg("error","Error logging in.");
    }
});
   }



   function join_submit() {
        name_check();
        email_check();
        password_check();
        password_re_check();
    var name=$("#join_name").val().replace(/ /g, '');
    var email=$("#join_email").val().replace(/ /g, '');
    var password=$("#join_password").val().replace(/ /g, '');
        var re_password=$("#join_re_password").val().replace(/ /g, '');



    $.ajax({
    url: "https://api-dev.cloudbric.com/v2/users",
    beforeSend: function(xhr) { 
      xhr.setRequestHeader("X-Cloudbric-Key", "zzg0cockog4g0sk4kgcc44ow0go40sw88wkkg8ks"); 
    },
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    processData: false,
    data: '{"name": "'+name+'", "email": "'+email+'", "password": "'+password+'"}',
    success: function (data) {
      var data = JSON.stringify(data);
      var data = JSON.parse(data);
      var user_idx=data.result;
     
       $("#join_modal").removeClass('active');
    },
    error: function(){
      alert_msg("Error","You are not a member. Please join me again.");
    }
});
   }
    function reset_password() {
    var email=$("#re_email").val().replace(/ /g, '');
    if (email.length<1) {
      alert_msg('error','Email address is invalid.');
      return;
    } else {
      re_email_member_check();
    }
  }

  function re_email_member_check() {
    var email=$("#re_email").val().replace(/ /g, '');
      $.ajax({
    url: "https://api-dev.cloudbric.com/v2/authority",
    beforeSend: function(xhr) { 
      xhr.setRequestHeader("X-Cloudbric-Key", "zzg0cockog4g0sk4kgcc44ow0go40sw88wkkg8ks"); 
    },
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    processData: false,
    data: '{"email": "'+email+'"}',
    success: function (data) {
      var data = JSON.stringify(data);
      var data = JSON.parse(data);
      var user_idx=data.result;
      alert_msg("This is not a registered mail.","We've send a temporary password to "+email+" Please login and reset yout password");
     

       $("#re_email_badge").addClass("badge-hide");
      $("#re_email").removeClass("input_error");
      $("#password_modal").removeClass("active");
      randomNum.printRandom(5);
      $.post("http://topnailart.co.kr/sendmail.php",
   {
    email:email,
    new_password:new_password
       },
   function(data){
    
   });


      
    },
    error: function(){
      alert_msg("error","This is not a registered mail.");
      $("#re_email_badge").removeClass("badge-hide");
      $("#re_email").addClass("input_error");
      return;
      
    }
});
   }



            
</script>
<style>
.focus_form {
  background-color: #FC87C9;
}
</style>

                           



















     <script type="text/javascript" charset="utf-8" src="js/PushNotification.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    
    <script type="text/javascript">
        app.initialize();

    </script>
     <script type="text/javascript" src="js/common.js"></script>
     



</body>


</html>
